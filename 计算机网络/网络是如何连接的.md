网络是由很多计算机等设备相互连接组成的，因此在通信的过程中需要确定正确的通信对象，并将请求和响应发送给它们。请求和响应在传递的过程中可能会丢失或损坏，因此这些情况也必须要考虑到。所以说，我们需要一种机制，无论遇到任何情况都能够将请求和响应准确无误地发送给对方。由于请求和响应都是由 0 和 1 组成的数字信息，所以可以说，我们需要的是一种能够将数字信息搬运到指定目的地的机制。

这种机制是由操作系统中的网络控制软件，以及交换机、路由器等设备分工合作来实现的，它的基本思路是将数字信息分割成一个一个的小块，然后装入一些被称为“包”（Packet）的容器中来运送。“包”这个词大家可能在用手机的时候经常会碰到 ，但在这里类似于邮政和快递中的概念。大家可以这样理解：包相当于信 件或者包裹，而交换机和路由器则相当于邮局或快递公司的分拣处理区。包的头部存有目的地等控制信息，通过许多交换机和路由器的接力，就可以根据控制信息对这些包进行分拣，然后将它们一步一步地搬运到目的地。无论是家庭和公司里的局域网，还是外面的互联网，它们只是在规模上有所不同，基本的机制都是相同的。

# 每章概要

## 第一章 web浏览器
从输入网址开始（URL）：
http://www.lab.glasscom.com/sample1.html
浏览器按照规则解析URL，然后生成请求消息<请给我sample1.html这一文件中储存的网页数据>，浏览器将请求消息发送给Web服务器，准确来说，是委托操作系统中的网络控制软件将消息发送给服务器。

## 第二章 协议栈、网卡
探索搬运数据的机制。网络控制软件叫做协议栈，它会将从浏览器接收到的消息打包，然后加上目的地址等控制信息（类似于把信装进信封，然后写上收信人的地址，此外，还有其他功能：发生通信错误时重新发送包，调节数据发送的效率），然后，协议栈会把包交给网卡（负责以太网或者无线网络通信的硬件），网卡将包转换为电信号并通过网线发送出去，包就因此进入网络。

## 第三章 集线器、交换机、路由器
客户端计算机可以通过家庭或者公司的局域网接入互联网，也可以直接接入互联网
网卡发送的包会经过交换机等设备，到达用来接入互联网的路由器，路由器的后面就是互联网，网络运营商负责将包送到目的地

## 第四章 接入网、网络运营商
紧接着，数据从路由器（用于接入互联网）出发，进入了互联网的内部，互联网的入口线路称为接入网，这种通信线路具体来说有：电话线、ISDN、ADSL、光线、专线等。接入网连接到签约的网络运营商，并接入被称为接入点（Point of Presence）的设备。
接入点的实体是一台转为运营商设计的路由器（类比离你家最近的邮局，从各个邮筒收集来的信件在邮局进行分拣，然后送往全国甚至全世界）接入点的后面就是互联网的骨干部分：**其中存在很多运营商和大量的路由器，相互连接组成网，网络包在其中经过若干路由器的接力，发送到目标Web服务器上**
家用和公司局域网一般采用以太网进行连接
互联网中除了以太网还会使用别的技术来传送网络包

## 第五章 防火墙、缓存服务器
通过骨干网，网络包最终到达了Web服务器所在的局域网，接着会遇到防火墙，它会检查进入的包，然后网络包可能会遇到缓存服务器，因为网页数据中有一部分是可复用的，访问网页数据时先查找缓存服务器，而且大型网站可能还配备负载均衡器，将Web服务器设置为分布式的。

## 第六章 Web服务器
网络包到达Web服务器后，数据被**解包**还原为原始的请求消息，然后交给Web服务器程序，这个解包也是由操作系统中的协议栈（网络控制软件）来完成的。然后Web服务器程序分析请求消息的含义，根据指示将数据装入响应消息中，发回给客户端。
响应到达客户端后，浏览器将数据在屏幕显示出来。

# 第一章 浏览器内部
## 1.1 生成http请求消息
浏览器是具备多种客户端功能的综合性客户端软件
访问Web服务器时，URL是以"http:"开头的，访问FTP服务器时用"ftp:"，是根据协议来的
不同的服务器程序使用不同的端口号，以示区分
URL的组成：
https:// Web服务器域名 + 端口号 + 文件路径名（文件路径 + 文件名）

### 1.1.2 浏览器先要解析URL
解析完才能生成发送给Web服务器的请求消息

### 1.1.3 也可以省略文件名
这样的话，访问时就是找默认文件

### 1.1.4 HTTP的基本思路
很简单：
1. 客户端向服务器发送请求消息（包含操作对象以及如何操作，即URI统一资源标识符 + 方法（比如GET（获取数据）、POST（表单，将用户输入数据一并发送）、HEAD等））
2. Web服务器收到请求并解析，执行相应操作，将结果存放在响应消息中，响应消息的开头有状态码，表示操作的成功与否

### 1.1.5 生成HTTP请求消息
有严格的格式要求，消息头 + 消息体

### 1.1.6 发送请求后会收到响应
响应消息特有的状态码和响应短语

## 1.2 向DNS服务器查询Web服务器的IP地址
### 1.2.1 IP地址的基本知识
生成HTTP消息后，要**委托操作系统将消息发送**给Web服务器
因此必须先查询网址中，服务器域名对应的IP地址

小型如公司内部的局域网都是基于TCP/IP的思路来设计的：
即：**一些小的子网（用集线器链接起来的几台计算机），通过路由器连接起来组成一个大的网络**
集线器和路由器都是对包进行转发的设备，集线器分为中继式集线器、交换式集线器
家用集线器内置了集线器功能
在网络中，所有设备都会被分配一个地址，类比现实生活中的“XX号XX室”。“号”对应的数字是分配给整个子网的（--> 网络号），“室”对应的数字是分配给子网中的计算机的（--> 主机号），加起来就是**IP地址**
#### 消息在物理上具体是怎么发送的呢？
发送的消息首先经过子网中的集线器，转发到距离最近的路由器上，然后路由器根据消息的目的地判断下一个路由器的位置，将消息转发到下一个路由器，接着，消息再次经过子网内的集线器被转发到下一个路由器，不断重复这样的过程，消息最终就到了目的地。PS：数据是以包的形式传送的。
（不能存在有两台设备使用相同的IP地址的情况）


## 1.3 全世界DNS服务器的大接力




## 1.4 委托协议栈发送消息
















