
# VECTOR文档



# 1 介绍
EM是AUTOSAR自适应平台的初始流程。
它是`第一个``激活`并`启动`AUTOSAR自适应平台其他部分的进程。
在运行期间，它根据`Machine要求的状态``启动`和`终止`进程。
它与操作系统协同工作，`根据配置`运行进程。

### 1.1.1 依赖
#### 自适应应用程序
如果没有明确禁用，由EM启动的每个进程都必须通过`ApplicationClient API`报告其内部执行状态。

#### 平台健康管理（PHM）
`PHM`可通过`RecoveryActionClient API`将自己注册为`进程`和`功能组状态变化`的观察者。
作为恢复行动，PHM可以请求`重启进程`或`进入安全状态`(？？？)。

#### 状态管理（SM）
SM可以通过改变`现有功能组的当前状态`来启动和停止进程。
通过`StateClient API`（有不同版本，参见第 2.1.2.4 和 2.1.2.5 章）启动和停止进程。

#### 故障处理程序
失败处理程序（`Failure Handler`）向`用户进程`提供`EM启动的进程的终止`的`最新信息`。




### 1.1.2 组件设计
Vector 的 EM 实现：
由一个包含主要server逻辑的`守护进程` 和 几个通过`IPC``与守护进程通信`的`client库`组成。
`EM提供的每项服务`都是作为一个`单独的库`实现的。

* EM 的守护进程启动后，首先执行`初始应用程序`并`等待其终止`。
* 随后，`EM`完成`内部初始化`。
* 它会`解析机器配置`并`查找已安装的可执行文件和可执行文件配置`。
* EM 初始化完成后，它将切换到机器状态`MachineFG “Startup”`，启动配置在机器中的所有进程。
进程，并考虑其依赖关系。
启动从这里开始，EM 是一个被动的服务器守护进程，只有在响应 IPC 服务请求时才会变得活跃。

SM可触发功能组状态转换，PHM可以将自己注册为进程状态变化的观察者。
作为`Recovery Action`，PHM 可以请求进程重启或进入安全状态。


### 1.1.3 Applications, Processes and Startup Configurations
在EM的上下文中，有些术语很容易混淆：
- 应用程序
- 可执行文件
- 进程
- 启动配置
- POSIX 操作系统进程

`应用程序`是一个逻辑概念，EM 并不了解它。
每个`应用程序`都由`多个`可在不同机器上部署的`可执行文件`组成。
每个`可执行文件`在运行时有多个实例，即所谓的`进程`（每个可执行文件会被加载为多个进程执行）。

每个进程可以在多个启动配置下被启动，例如定义进程的启动参数（每个APP，StartupConfigs可以配置多份，在不同时期，执行不同的启动配置）。
`同一进程`只能有`一个启动配置`可以同时执行。
`一个启动配置`会产生一个`正在运行的POSIX操作系统进程实例`
















