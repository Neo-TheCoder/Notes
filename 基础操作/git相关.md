# GIT管理的基本结构
1. Working Tree 当前的工作区域
2. Index/Stage 暂存区
3. Repository 版本库，提交的历史（git commit提交的结果）
4. Remote Repository 远程版本库

# 版本管理的基本命令
**git revert -n <commit_id>**
撤销该版本的修改，不会删除repo里的原有版本，而是会增加一个新版本
比如，我们 commit 了三个版本（版本一、版本二、 版本三），突然发现版本二不行（如：有 bug），想要撤销版本二，但又不想影响撤销版本三的提交，就可以用 git revert 命令来反做版本二，生成新的版本四，这个版本四里会保留版本三的东西，但撤销了版本二的东西。
当然，如果之前（版本三）和之后（版本二）版本有改到同一个地方可能会触发冲突，需要手动解决冲突。

**git rebase**
git rebase 的功能是完成变基的操作，常常用来进行对 commit 进行整理，如合并多个 commit。
常用的命令是 git rebase -i [startpoint] [endpoint] 
用来交互式整理指定范围的commit。

**git reset**
git reset 有三种模式，即：--soft，--mixed（默认），--hard

# 常见场景
## 工作区的代码想撤销
git checkout -- <file>
撤销当前工作目录中指定文件的修改

## add 到暂存区的代码想撤销
git reset HEAD
将已经 add 到暂存区的代码撤销到工作区，即 **add 操作的逆操作**

## 提交到本地仓库的代码想撤销
可以利用：git reset --hard <版本号>命令来实现版本回退，该命令中的版本号有几种不同的写法：
1. 可以使用 HEAD^ 来描述版本，一个 ^ 表示前一个版本，两个 ^^ 表示前两个版本，以此类推；
2. 也可以使用数字来代替 ^，比如说前 100 个版本可以写作 HEAD~100；
3. 也可以直接写版本号，表示跳转到某一个版本处。每次提交后，都会生成一个哈希码作为版本号，所以这里可以直接填版本号，哈希码很长，但是不用全部输入，只需要输入前面几个字符即可。
**注意：此操作会直接将工作区，暂存区的当前内容清空，并撤回到指定回退版本的状态**

## 远程仓库的代码想撤销
**本地撤销后，push 到远程即可**。可能会报错远程分支比当前本地分支超前，可以通过该 -f 参数强制 push 到远程。

## 版本回退误操作的补救
有时可能发生一些意外，特别是 git reset --hard 这个死亡操作，更是可能产生严重后果。
如果发现 git reset --hard 误操作了，在某些情况下是可以还原的：
1. 想还原被回退了的那些 commits 的内容，比较简单；
2. 想还原被 add 但是没有 commit 的内容，比较复杂；
3. 想还原没有 add 的内容，别做梦了，基本不可能。 首先的首先，切记，还原操作之前，先把当前的内容做好备份！







